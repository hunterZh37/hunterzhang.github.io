---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { ui, type LanguageCode, defaultLanguage, languages } from '@/i18n/ui';
import { getTranslatedProjects, ProjectsScreen } from '@/features/projects';

let lang: LanguageCode;
const currentLocale = Astro.currentLocale;

if (currentLocale && currentLocale in languages) {
  lang = currentLocale as LanguageCode;
} else {
  lang = defaultLanguage;
}

const projects = getTranslatedProjects();

const projectsPageTranslations = ui.fr.projectsPage;
const metaTitle =
  projectsPageTranslations?.metaTitle ??
  projectsPageTranslations?.title ??
  'Mes Projets';
const metaDescription =
  projectsPageTranslations?.metaDescription ?? 'Liste de tous mes projets.';
---

<BaseLayout pageTitle={metaTitle} pageDescription={metaDescription}>
  <ProjectsScreen projects={projects} />
</BaseLayout>
